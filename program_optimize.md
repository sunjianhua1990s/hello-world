优化程序性能
======================


###编写高效程序需要几类活动
1. 合适的算法和数据结构
2. 编写出编译器能够有效优化的程序
3. 针对处理运算量特别大的计算，将一个任务分成多个任务。

###优化编译器的能力和局限性
1. 编译器必须假设不同的指针可能指向存储器中同一位置
2. 用内联函数替换优化函数调用，gcc中使用 -finline 参数
3. CPE，每元素周期数，作为一种表示程序性能并指导我们改进代码的方法。用时钟周期来表示，CPE表示执行了多少条代码

###程序优化
1. **消除循环的低效率**，将重复的、低效率的计算移到循环外
2. **减少过程调用**
3. **清除不必要的存储器引用**，使用临时变量代替，最后赋值给存储器引用
4. **循环展开**，通过增加每次迭代计算的元素数量，减少循环迭代次数
5. 提高并行性：**多变量累积** +** 重新结合变换**

###描述程序最大性能的两种界限
1. **延迟界限**：下一条指令开始之前，这条指令必须结束。当代码中的数据相关限制了处理器利用指令级并行的能力时，延迟界限能够限制程序的性能。
2. **吞吐量界限**：处理器功能单元的原始计算能力。

###存储器性能
1. 加载的性能：从存储位置读到寄存器中
2. 存储的性能：将寄存器位置写到存储器中

###程序剖析
1. unix上使用**GPROF**进行成寻剖析，需要注意的是：
（1）计时不准确
（2）调用信息相当可靠
（3）默认情况下不会显示对库函数的调用。
2. Amdahl定律：当我们加快系统一部分的速度时，对系统整体性能的影响依赖于这部分有多重要和速度提高多少。。加速度比=原来的用时Told / 现在的用时Tnew

